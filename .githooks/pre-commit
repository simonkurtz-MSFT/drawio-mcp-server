#!/bin/sh

# Pre-commit hook: auto-format staged files with Deno

# Capture only the files currently staged for commit
STAGED_FILES=$(git diff --cached --name-only --diff-filter=d)

if [ -z "$STAGED_FILES" ]; then
  exit 0
fi

# Format only the staged files
echo "$STAGED_FILES" | xargs deno fmt

# Re-stage only the files that were originally staged
echo "$STAGED_FILES" | xargs git add
